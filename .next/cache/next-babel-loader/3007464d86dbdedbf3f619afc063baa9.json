{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport './index.scss';\nimport Page from '../../components/Page';\nimport Content from '../../components/Content';\nimport { searchBySubCategory } from '../../reducers/Search/actions';\nimport BusinessListView from '../../components/BusinessListView';\nimport SubCategoryPicker from '../../components/SubCategoryPicker';\nimport { buildPlaceUrl } from '../../services/urlBuilderService';\nimport { Breadcrumbs, FancyTitle } from '../../components';\n\nclass SearchResultsPage extends Component {\n  // componentDidMount() {\n  //   this.loadResults();\n  // }\n  componentDidUpdate(prevProps) {\n    if (this.props.location !== prevProps.location) {\n      this.loadResults();\n    }\n  }\n\n  loadResults() {\n    const urlParams = new URLSearchParams(window.location.search);\n    const placeId = urlParams.get('placeId');\n    const subCategoryId = urlParams.get('subCategoryId');\n    this.props.searchBySubCategory(placeId, subCategoryId);\n  }\n\n  getPageTitle() {\n    const {\n      selectedPlace,\n      selectedSubCategory\n    } = this.props;\n    let resultTitle = 'תוצאות חיפוש';\n\n    if (selectedPlace && selectedSubCategory) {\n      resultTitle += ` | ${selectedSubCategory.title} ב${selectedPlace.heName}`;\n    }\n\n    return resultTitle;\n  }\n\n  getBreadcrumbsData() {\n    const {\n      selectedPlace,\n      selectedSubCategory\n    } = this.props;\n    let items = [];\n    if (!selectedSubCategory || !selectedPlace) return items;\n\n    if (selectedPlace.country && typeof selectedPlace.country === 'object') {\n      items.push({\n        title: selectedPlace.country.heName,\n        link: buildPlaceUrl(selectedPlace.country),\n        placeObject: selectedPlace.country\n      });\n    }\n\n    items.push({\n      title: selectedPlace.heName,\n      link: buildPlaceUrl(selectedPlace),\n      placeObject: selectedPlace\n    });\n    items.push({\n      title: selectedSubCategory.title,\n      isHighlighted: true\n    });\n    return items;\n  }\n\n  render() {\n    const pageTitle = this.getPageTitle() || '';\n    return __jsx(Page, {\n      className: \"search-results-page\"\n    }, __jsx(Content, null, pageTitle && __jsx(FancyTitle, {\n      highlightedTitle: pageTitle\n    }), __jsx(Breadcrumbs, {\n      items: this.getBreadcrumbsData()\n    }), __jsx(SubCategoryPicker, this.props), __jsx(\"div\", {\n      className: \"spacer\"\n    }), __jsx(BusinessListView, this.props)));\n  }\n\n}\n\nconst mapStateToProps = ({\n  SearchReducer\n}) => {\n  const {\n    isLoading,\n    selectedPlace,\n    businessList,\n    selectedSubCategory,\n    subCategoriesList\n  } = SearchReducer;\n  return {\n    isLoading,\n    selectedPlace,\n    businessList,\n    selectedSubCategory,\n    subCategoriesList\n  };\n};\n\nconst mapDispatchToProps = {\n  searchBySubCategory\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchResultsPage);","map":{"version":3,"sources":["/Users/kobimantzur/mapo/hello-next/src/containers/SearchResultsPage/index.js"],"names":["React","Component","connect","Page","Content","searchBySubCategory","BusinessListView","SubCategoryPicker","buildPlaceUrl","Breadcrumbs","FancyTitle","SearchResultsPage","componentDidUpdate","prevProps","props","location","loadResults","urlParams","URLSearchParams","window","search","placeId","get","subCategoryId","getPageTitle","selectedPlace","selectedSubCategory","resultTitle","title","heName","getBreadcrumbsData","items","country","push","link","placeObject","isHighlighted","render","pageTitle","mapStateToProps","SearchReducer","isLoading","businessList","subCategoriesList","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport './index.scss';\nimport Page from '../../components/Page';\nimport Content from '../../components/Content';\nimport { searchBySubCategory } from '../../reducers/Search/actions';\nimport BusinessListView from '../../components/BusinessListView';\nimport SubCategoryPicker from '../../components/SubCategoryPicker';\nimport { buildPlaceUrl } from '../../services/urlBuilderService';\nimport { Breadcrumbs, FancyTitle } from '../../components';\nclass SearchResultsPage extends Component {\n  // componentDidMount() {\n  //   this.loadResults();\n  // }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.location !== prevProps.location) {\n      this.loadResults();\n    }\n  }\n\n  loadResults() {\n    const urlParams = new URLSearchParams(window.location.search);\n    const placeId = urlParams.get('placeId');\n    const subCategoryId = urlParams.get('subCategoryId');\n\n    this.props.searchBySubCategory(placeId, subCategoryId);\n  }\n\n  getPageTitle() {\n    const { selectedPlace, selectedSubCategory } = this.props;\n    let resultTitle = 'תוצאות חיפוש';\n    if (selectedPlace && selectedSubCategory) {\n      resultTitle += ` | ${selectedSubCategory.title} ב${selectedPlace.heName}`;\n    }\n\n    return resultTitle;\n  }\n  getBreadcrumbsData() {\n    const { selectedPlace, selectedSubCategory } = this.props;\n    let items = [];\n\n    if (!selectedSubCategory || !selectedPlace) return items;\n\n    if (selectedPlace.country && typeof selectedPlace.country === 'object') {\n      items.push({\n        title: selectedPlace.country.heName,\n        link: buildPlaceUrl(selectedPlace.country),\n        placeObject: selectedPlace.country\n      });\n    }\n    items.push({\n      title: selectedPlace.heName,\n      link: buildPlaceUrl(selectedPlace),\n      placeObject: selectedPlace\n    });\n\n    items.push({\n      title: selectedSubCategory.title,\n      isHighlighted: true\n    });\n\n    return items;\n  }\n\n  render() {\n    const pageTitle = this.getPageTitle() || '';\n    return (\n      <Page className=\"search-results-page\">\n        <Content>\n          {pageTitle && <FancyTitle highlightedTitle={pageTitle} />}\n          <Breadcrumbs items={this.getBreadcrumbsData()} />\n          <SubCategoryPicker {...this.props} />\n          <div className=\"spacer\" />\n          <BusinessListView {...this.props} />\n        </Content>\n      </Page>\n    );\n  }\n}\nconst mapStateToProps = ({ SearchReducer }) => {\n  const {\n    isLoading,\n    selectedPlace,\n    businessList,\n    selectedSubCategory,\n    subCategoriesList\n  } = SearchReducer;\n  return {\n    isLoading,\n    selectedPlace,\n    businessList,\n    selectedSubCategory,\n    subCategoriesList\n  };\n};\nconst mapDispatchToProps = {\n  searchBySubCategory\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchResultsPage);\n"]},"metadata":{},"sourceType":"module"}