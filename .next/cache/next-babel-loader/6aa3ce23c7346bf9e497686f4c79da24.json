{"ast":null,"code":"// import React, { Component } from 'react'\n// import Modal from 'react-modal';\n// import { Input, Rate, Button, Icon } from 'antd';\n// import FacebookLogin from 'react-facebook-login';\n// import classnames from 'classnames';\n// const { TextArea } = Input;\n// import \"./index.scss\"\n// import { reportEvent } from '../../../../services/analyticsService';\n// const MAX_CHARS = 400;\n// const MIN_CHARS = 2;\n// Modal.setAppElement('#react-root')\n// const customStyles = {\n//   content : {\n//     top                   : '50%',\n//     left                  : '50%',\n//     right                 : 'auto',\n//     bottom                : 'auto',\n//     marginRight           : '-50%',\n//     transform             : 'translate(-50%, -50%)'\n//   }\n// };\n// export default class ReviewModal extends Component {\n//   constructor(props) {\n//       super(props)\n//       this.state = {\n//         comment: '',\n//         score: undefined,\n//         step: 0, // 0 = form, 1 = login\n//         isValid: false,\n//         isTouched: false,\n//       }\n//   }\n//   onClose = () => {\n//       this.props.onClose();\n//   }\n//   onChange = (e) => {\n//     const comment = e.target.value;\n//     if (comment.length > MAX_CHARS) return;\n//     const currentState = {...this.state, comment};\n//     this.setState({comment, isValid: this.isFormValid(currentState)});\n//   }\n//   onStarChange = (score) => {\n//     const currentState = {...this.state, score};\n//     this.setState({score, isValid: this.isFormValid(currentState)})\n//   }\n//   onStepChange = (step) => {\n//     if (step === 1) {\n//       reportEvent({\n//         category: 'ReviewModal',\n//         action: 'SubmitClick'\n//       })\n//     }\n//     this.setState({step});\n//   }\n//   onCloseClick = () => {\n//     reportEvent({\n//       category: 'ReviewModal',\n//       action: 'CancelClick'\n//     })\n//     this.props.onCloseClick();\n//   }\n//   onFacebookResponse = (facebookResponse) => {\n//     const {submitBusinessReview, business} = this.props;\n//     const { score, comment } = this.state;\n//     if (!score || !comment) return;\n//     if (!facebookResponse) {\n//       //TODO: throw error\n//       return;\n//     }\n//     const formData = new FormData();\n//     formData.append('businessId', business._id);\n//     formData.append('comment', comment);\n//     formData.append('answer1', score);\n//     this.props.fbLogin(facebookResponse, () => {submitBusinessReview(formData)});\n//     this.props.setReviewLoadingState(true);\n//   }\n//   isFormValid(params){\n//     if (params.score === undefined) return false;\n//     if (!params.comment || params.comment.length > MAX_CHARS || params.comment.length < MIN_CHARS) return false;\n//     return true;\n//   }\n//   renderForm() {\n//     const {business} = this.props;\n//     const {comment, score, step, isValid} = this.state;\n//     return(\n//       <React.Fragment>\n//         <h2 ref={subtitle => this.subtitle = subtitle}>{`מה דעתך על ${business.englishName}?`}</h2>\n//          <div className=\"stars-wrapper\">\n//             <h3>הדירוג שלך</h3>\n//             <Rate value={score} onChange={this.onStarChange}  />\n//           </div>\n//           <div className=\"comment-wrapper\">\n//             <h3>הביקורת שלך</h3>\n//             <TextArea className=\"comment\" placeholder=\"כמה מילים על החוויה שלך עם העסק?\" rows={4} value={comment} onChange={this.onChange} />\n//             <div className=\"buttons-wrapper\">\n//             <span className=\"close-btn\" onClick={() => this.onCloseClick()}>סגור</span>\n//             <Button className={classnames('submit-btn', {'disabled': !isValid})} disabled={!isValid} onClick={() => this.onStepChange(1)}>שלח דירוג</Button>\n//             </div>\n//           </div>\n//       </React.Fragment>\n//     )\n//   }\n//   renderAuth() {\n//     const {comment, score} = this.state;\n//     const {isReviewLoading} = this.props;\n//     return(\n//       <React.Fragment>\n//         <h2 >{`התחברות לMapo`}</h2>\n//         <div className=\"facebook-login-wrapper\">\n//         {isReviewLoading && (<Icon style={{fontSize: '30'}} spin type=\"loading\" />)}\n//         {!isReviewLoading && (<FacebookLogin\n//         isDisabled={!comment || !score}\n//         textButton={`התחבר עם פייסבוק`}\n//         appId=\"291124068055220\" //APP ID NOT CREATED YET\n//         fields=\"name,email,picture\"\n//         callback={this.onFacebookResponse}\n//       />)}\n//       </div>\n//       </React.Fragment>\n//     )\n//   }\n//     render() {\n//         const {isOpen, business, isReviewLoading} = this.props;\n//         const {comment, score, step} = this.state;\n//     return (\n//         <Modal\n//         id=\"reviewModal\"\n//         style={customStyles}\n//         // className=\"review-modal\"\n//           isOpen={isOpen}\n//         //   onAfterOpen={this.afterOpenModal}\n//           onRequestClose={this.onClose}\n//         //   style={customStyles}\n//           contentLabel=\"Example Modal\"\n//         >\n//           {step == 0 && this.renderForm()}\n//           {step == 1 && this.renderAuth()}\n//         </Modal>\n//     )\n//   }\n// }","map":{"version":3,"sources":["/Users/kobi.mantzur/m/n/src/containers/BusinessPage/Components/ReviewModal/index.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA","sourcesContent":["// import React, { Component } from 'react'\n// import Modal from 'react-modal';\n// import { Input, Rate, Button, Icon } from 'antd';\n// import FacebookLogin from 'react-facebook-login';\n// import classnames from 'classnames';\n\n// const { TextArea } = Input;\n// import \"./index.scss\"\n// import { reportEvent } from '../../../../services/analyticsService';\n// const MAX_CHARS = 400;\n// const MIN_CHARS = 2;\n// Modal.setAppElement('#react-root')\n\n// const customStyles = {\n//   content : {\n//     top                   : '50%',\n//     left                  : '50%',\n//     right                 : 'auto',\n//     bottom                : 'auto',\n//     marginRight           : '-50%',\n//     transform             : 'translate(-50%, -50%)'\n//   }\n// };\n\n// export default class ReviewModal extends Component {\n//   constructor(props) {\n//       super(props)\n//       this.state = {\n//         comment: '',\n//         score: undefined,\n//         step: 0, // 0 = form, 1 = login\n//         isValid: false,\n//         isTouched: false,\n//       }\n//   }\n//   onClose = () => {\n//       this.props.onClose();\n//   }\n//   onChange = (e) => {\n//     const comment = e.target.value;\n//     if (comment.length > MAX_CHARS) return;\n//     const currentState = {...this.state, comment};\n//     this.setState({comment, isValid: this.isFormValid(currentState)});\n//   }\n//   onStarChange = (score) => {\n//     const currentState = {...this.state, score};\n\n//     this.setState({score, isValid: this.isFormValid(currentState)})\n//   }\n//   onStepChange = (step) => {\n//     if (step === 1) {\n//       reportEvent({\n//         category: 'ReviewModal',\n//         action: 'SubmitClick'\n//       })\n//     }\n//     this.setState({step});\n//   }\n//   onCloseClick = () => {\n//     reportEvent({\n//       category: 'ReviewModal',\n//       action: 'CancelClick'\n//     })\n//     this.props.onCloseClick();\n//   }\n//   onFacebookResponse = (facebookResponse) => {\n//     const {submitBusinessReview, business} = this.props;\n//     const { score, comment } = this.state;\n//     if (!score || !comment) return;\n//     if (!facebookResponse) {\n//       //TODO: throw error\n//       return;\n//     }\n//     const formData = new FormData();\n//     formData.append('businessId', business._id);\n//     formData.append('comment', comment);\n//     formData.append('answer1', score);\n//     this.props.fbLogin(facebookResponse, () => {submitBusinessReview(formData)});\n//     this.props.setReviewLoadingState(true);\n//   }\n//   isFormValid(params){\n//     if (params.score === undefined) return false;\n//     if (!params.comment || params.comment.length > MAX_CHARS || params.comment.length < MIN_CHARS) return false;\n//     return true;\n//   }\n//   renderForm() {\n//     const {business} = this.props;\n//     const {comment, score, step, isValid} = this.state;\n\n//     return(\n//       <React.Fragment>\n//         <h2 ref={subtitle => this.subtitle = subtitle}>{`מה דעתך על ${business.englishName}?`}</h2>\n//          <div className=\"stars-wrapper\">\n//             <h3>הדירוג שלך</h3>\n//             <Rate value={score} onChange={this.onStarChange}  />\n//           </div>\n//           <div className=\"comment-wrapper\">\n//             <h3>הביקורת שלך</h3>\n//             <TextArea className=\"comment\" placeholder=\"כמה מילים על החוויה שלך עם העסק?\" rows={4} value={comment} onChange={this.onChange} />\n//             <div className=\"buttons-wrapper\">\n//             <span className=\"close-btn\" onClick={() => this.onCloseClick()}>סגור</span>\n//             <Button className={classnames('submit-btn', {'disabled': !isValid})} disabled={!isValid} onClick={() => this.onStepChange(1)}>שלח דירוג</Button>\n//             </div>\n//           </div>\n//       </React.Fragment>\n//     )\n//   }\n//   renderAuth() {\n//     const {comment, score} = this.state;\n//     const {isReviewLoading} = this.props;\n//     return(\n//       <React.Fragment>\n//         <h2 >{`התחברות לMapo`}</h2>\n//         <div className=\"facebook-login-wrapper\">\n//         {isReviewLoading && (<Icon style={{fontSize: '30'}} spin type=\"loading\" />)}\n//         {!isReviewLoading && (<FacebookLogin\n//         isDisabled={!comment || !score}\n//         textButton={`התחבר עם פייסבוק`}\n//         appId=\"291124068055220\" //APP ID NOT CREATED YET\n//         fields=\"name,email,picture\"\n//         callback={this.onFacebookResponse}\n//       />)}\n//       </div>\n//       </React.Fragment>\n//     )\n//   }\n//     render() {\n//         const {isOpen, business, isReviewLoading} = this.props;\n//         const {comment, score, step} = this.state;\n//     return (\n//         <Modal\n//         id=\"reviewModal\"\n//         style={customStyles}\n//         // className=\"review-modal\"\n//           isOpen={isOpen}\n//         //   onAfterOpen={this.afterOpenModal}\n//           onRequestClose={this.onClose}\n//         //   style={customStyles}\n//           contentLabel=\"Example Modal\"\n//         >\n\n//           {step == 0 && this.renderForm()}\n//           {step == 1 && this.renderAuth()}\n//         </Modal>\n\n//     )\n//   }\n// }\n"]},"metadata":{},"sourceType":"script"}