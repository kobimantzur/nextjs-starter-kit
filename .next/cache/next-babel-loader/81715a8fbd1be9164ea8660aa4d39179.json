{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { push } from 'connected-react-router';\nimport { getRequest } from '../../services/requestService';\nimport * as types from './types';\nimport { buildSearchUrl } from '../../services/urlBuilderService';\nexport var getCountries = function getCountries() {\n  return function _callee(dispatch) {\n    var res, payload;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(getRequest('/placements/getPlacementsData'));\n\n          case 2:\n            res = _context.sent;\n            payload = _objectSpread({\n              isLoading: false\n            }, res.data);\n            dispatch({\n              type: types.SET_COUNTRIES,\n              payload: payload\n            });\n            return _context.abrupt(\"return\", payload);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  };\n};\nexport var getPlaceDetails = function getPlaceDetails(placeId) {\n  return function _callee2(dispatch) {\n    var res;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(getRequest(\"/placements/getPlaceDetails?placeId=\".concat(placeId)));\n\n          case 2:\n            res = _context2.sent;\n            dispatch({\n              type: types.SET_PLACE_DETAILS,\n              payload: _objectSpread({\n                isLoading: false\n              }, res.data)\n            });\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  };\n};\nexport function setSearchModalState(isSearchOpen) {\n  return {\n    type: types.SET_MODAL_STATE,\n    payload: {\n      isSearchOpen: isSearchOpen\n    }\n  };\n}\nexport var searchQuery = function searchQuery() {\n  var query = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return function _callee3(dispatch) {\n    var firstPayload, res;\n    return _regeneratorRuntime.async(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            firstPayload = {\n              isSearchLoading: true,\n              query: query\n            };\n\n            if (!query) {\n              firstPayload.autocompleteList = [];\n              firstPayload.isSearchLoading = false;\n            }\n\n            dispatch({\n              type: types.SEARCH_QUERY,\n              payload: firstPayload\n            });\n\n            if (!query) {\n              _context3.next = 8;\n              break;\n            }\n\n            _context3.next = 6;\n            return _regeneratorRuntime.awrap(getRequest(\"webSearch/searchByQuery?query=\".concat(query)));\n\n          case 6:\n            res = _context3.sent;\n            dispatch({\n              type: types.SEARCH_QUERY,\n              payload: {\n                autocompleteList: res.data,\n                isSearchLoading: false\n              }\n            });\n\n          case 8:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    });\n  };\n};\nexport var navigateSearchBySubCategory = function navigateSearchBySubCategory(selectedPlace, subCategory) {\n  return function _callee4(dispatch) {\n    var targetUrl;\n    return _regeneratorRuntime.async(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            targetUrl = buildSearchUrl({\n              placeId: selectedPlace._id,\n              subCategoryId: subCategory._id\n            });\n            dispatch(push(targetUrl));\n            dispatch({\n              type: types.SEARCH_SUB_CATEGORY,\n              payload: {\n                isLoading: true,\n                selectedSubCategory: subCategory\n              }\n            });\n\n          case 3:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    });\n  };\n};\nexport var searchBySubCategory = function searchBySubCategory(placeId, subCategoryId) {\n  return function _callee5(dispatch) {\n    var res, payload;\n    return _regeneratorRuntime.async(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            dispatch({\n              type: types.SEARCH_SUB_CATEGORY,\n              payload: {\n                isLoading: true\n              }\n            });\n            _context5.next = 3;\n            return _regeneratorRuntime.awrap(getRequest(\"webSearch/searchBySubCategory?placeId=\".concat(placeId, \"&subCategoryId=\").concat(subCategoryId)));\n\n          case 3:\n            res = _context5.sent;\n            payload = _objectSpread({\n              isLoading: false\n            }, res.data);\n            dispatch({\n              type: types.SEARCH_SUB_CATEGORY,\n              payload: payload\n            });\n            return _context5.abrupt(\"return\", payload);\n\n          case 7:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    });\n  };\n};","map":{"version":3,"sources":["/Users/kobimantzur/mapo/hello-next/src/reducers/Search/actions.js"],"names":["push","getRequest","types","buildSearchUrl","getCountries","dispatch","res","payload","isLoading","data","type","SET_COUNTRIES","getPlaceDetails","placeId","SET_PLACE_DETAILS","setSearchModalState","isSearchOpen","SET_MODAL_STATE","searchQuery","query","firstPayload","isSearchLoading","autocompleteList","SEARCH_QUERY","navigateSearchBySubCategory","selectedPlace","subCategory","targetUrl","_id","subCategoryId","SEARCH_SUB_CATEGORY","selectedSubCategory","searchBySubCategory"],"mappings":"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","sourcesContent":["import { push } from 'connected-react-router';\nimport { getRequest } from '../../services/requestService';\nimport * as types from './types';\nimport { buildSearchUrl } from '../../services/urlBuilderService';\n\nexport const getCountries = () => async dispatch => {\n  const res = await getRequest('/placements/getPlacementsData');\n  const payload = { isLoading: false, ...res.data };\n  dispatch({ type: types.SET_COUNTRIES, payload });\n\n  return payload;\n};\n\nexport const getPlaceDetails = placeId => async dispatch => {\n  const res = await getRequest(`/placements/getPlaceDetails?placeId=${placeId}`);\n\n  dispatch({ type: types.SET_PLACE_DETAILS, payload: { isLoading: false, ...res.data } });\n};\n\nexport function setSearchModalState(isSearchOpen) {\n  return {\n    type: types.SET_MODAL_STATE,\n    payload: { isSearchOpen }\n  };\n}\n\nexport const searchQuery = (query = '') => async dispatch => {\n  const firstPayload = { isSearchLoading: true, query };\n  if (!query) {\n    firstPayload.autocompleteList = [];\n    firstPayload.isSearchLoading = false;\n  }\n  dispatch({ type: types.SEARCH_QUERY, payload: firstPayload });\n  if (query) {\n    const res = await getRequest(`webSearch/searchByQuery?query=${query}`);\n    dispatch({\n      type: types.SEARCH_QUERY,\n      payload: { autocompleteList: res.data, isSearchLoading: false }\n    });\n  }\n};\n\nexport const navigateSearchBySubCategory = (selectedPlace, subCategory) => async dispatch => {\n  const targetUrl = buildSearchUrl({\n    placeId: selectedPlace._id,\n    subCategoryId: subCategory._id\n  });\n  dispatch(push(targetUrl));\n  dispatch({\n    type: types.SEARCH_SUB_CATEGORY,\n    payload: { isLoading: true, selectedSubCategory: subCategory }\n  });\n};\n\nexport const searchBySubCategory = (placeId, subCategoryId) => async dispatch => {\n  dispatch({\n    type: types.SEARCH_SUB_CATEGORY,\n    payload: { isLoading: true }\n  });\n  const res = await getRequest(\n    `webSearch/searchBySubCategory?placeId=${placeId}&subCategoryId=${subCategoryId}`\n  );\n  const payload = { isLoading: false, ...res.data };\n  dispatch({\n    type: types.SEARCH_SUB_CATEGORY,\n    payload\n  });\n\n  return payload;\n};\n"]},"metadata":{},"sourceType":"module"}