{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport _ from 'underscore';\nimport { connect } from 'react-redux';\nimport Button from 'antd/lib/button';\nimport { Row, Col, Rate, Layout, Card, Icon } from 'antd';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faMapPin, faMapMarker } from '@fortawesome/free-solid-svg-icons';\nimport { getFriendlyTime, isMobile } from '../../services/commonService';\nimport { getBusinessByFriendlyUrl, setReviewLoadingState, setEmptyState, submitBusinessReview, setReviewModalState, cleanBusinessPage } from '../../reducers/BusinessPage/actions';\nimport './index.scss';\nimport mailIcon from '../../img/mail-icon.png';\nimport { ShareButtons } from './Components';\nimport Map, { DEF_PROPS } from './Components/Map';\nimport Gallery from './Components/Gallery';\nimport { reportScreen, reportEvent } from '../../services/analyticsService';\nimport { AppSpinner, CardWrap, UserInfo, FancyTitle } from '../../components';\nimport Breadcrumbs from '../../components/Breadcrumbs';\nimport Tags from './Components/Tags';\nimport Page from '../../components/Page';\nimport Content from '../../components/Content'; // const { Content } = Layout;\n\nconst daysList = ['ראשון', 'שני', 'שלישי', 'רביעי', 'חמישי', 'שישי', 'שבת'];\nconst defaultProps = {\n  business: undefined,\n  getBusinessByFriendlyUrl: _.noop,\n  isLoading: true\n};\n\nclass BusinessPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"onModalStateChange\", s => {\n      this.props.setReviewModalState(s);\n    });\n\n    _defineProperty(this, \"formatPhoneNumber\", s => {\n      const s2 = `${s}`.replace(/\\D/g, '');\n      const m = s2.match(/^(\\d{3})(\\d{3})(\\d{4})$/);\n      return !m ? null : `(${m[1]}) ${m[2]}-${m[3]}`;\n    });\n\n    _defineProperty(this, \"formatTime\", time => {\n      const parsedTime = new Date(JSON.parse(JSON.stringify(new Date(time))));\n\n      if (parsedTime) {\n        const hours = parsedTime.getHours() < 10 ? `0${parsedTime.getHours()}` : parsedTime.getHours();\n        const minutes = parsedTime.getMinutes() < 10 ? `0${parsedTime.getMinutes()}` : parsedTime.getMinutes();\n        return `${hours}:${minutes}`;\n      }\n\n      return '';\n    });\n\n    _defineProperty(this, \"renderInfoSection\", () => {\n      return null;\n      return __jsx(Row, {\n        className: \"info-wrapper\"\n      }, __jsx(Col, {\n        span: 12,\n        push: 12\n      }, __jsx(\"div\", {\n        className: \"info-item\"\n      }, __jsx(\"h1\", null, \"\\u05D1\\u05E2\\u05DC \\u05E2\\u05E1\\u05E7?\"), __jsx(\"p\", null, \"\\u05DE\\u05D7\\u05E4\\u05E9 \\u05DC\\u05E7\\u05D3\\u05DD \\u05D0\\u05EA \\u05D4\\u05E2\\u05E1\\u05E7 \\u05E9\\u05DC\\u05DA?\", __jsx(\"br\", null), \"\\u05D0\\u05E6\\u05DC\\u05E0\\u05D5 \\u05EA\\u05E7\\u05D1\\u05DC \\u05D4\\u05D6\\u05D3\\u05DE\\u05E0\\u05D5\\u05EA \\u05DC\\u05D7\\u05E9\\u05D9\\u05E4\\u05D4 \\u05E2\\u05E0\\u05E7\\u05D9\\u05EA \\u05D5\\u05E4\\u05E8\\u05E1\\u05D5\\u05DD \\u05DC\\u05D1\\u05D9\\u05EA \\u05D4\\u05E2\\u05E1\\u05E7 \\u05E9\\u05DC\\u05DA.\"))), __jsx(Col, {\n        span: 12,\n        pull: 12\n      }, __jsx(\"div\", {\n        className: \"info-item\"\n      }, __jsx(\"h1\", null, \"\\u05DE\\u05D4 \\u05D6\\u05D4 Mapo?\"), __jsx(\"p\", null, `עברת ללוס אנג'לס?\n\nמחפש רופא? או אולי עורך דין טוב? הקושי של השפה מקשה עלייך?\n\nאתה לא לבד! `, __jsx(\"br\", null), `בשביל זה אנחנו פה.\n\nאנחנו בMapo דואגים לספק לך את כל העסקים\n\nונותני השירות הישראלים.`))));\n    });\n\n    this.state = {\n      isMobile: false\n    };\n  } // componentWillMount() {\n  //   const { friendlyUrl } = this.props.match.params;\n  //   if (!friendlyUrl) {\n  //     window.location.href = 'https://mymapo.com';\n  //     // this.props.setEmptyState();\n  //   } else {\n  //     this.props.getBusinessByFriendlyUrl(friendlyUrl);\n  //   }\n  // }\n\n\n  componentWillUnmount() {\n    this.props.cleanBusinessPage();\n  }\n\n  componentDidMount() {\n    reportScreen(location.pathname);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  getPlaceName(business) {\n    if (!business.placements || business.placements.length === 0) return null;\n    if (!business.subCategories || business.subCategories.length === 0) return null;\n    const title = `${business.subCategories[0].title} ב${business.placements[0].heName} -`; // if (business.placements[0].country) {\n    //   title += `, ${business.placements[0].country.heName}`;\n    // }\n\n    return title;\n  }\n\n  getLocationTitle(business) {\n    if (!business || !business.placements || business.placements.length === 0) return '';\n    const locationName = business.placements[0].heName; // if (business.placements[0].country) {\n    //   locationName += `, <b>${business.placements[0].country.heName}</b>`;\n    // }\n\n    return __jsx(\"div\", {\n      className: \"address\"\n    }, __jsx(\"b\", null, locationName, \", \"), business.placements[0].country && business.placements[0].country.heName);\n  }\n\n  renderBusinessHeader() {\n    const {\n      business\n    } = this.props;\n    if (!business) return null;\n    const {\n      englishName,\n      subSubCategory,\n      description\n    } = business;\n    return __jsx(Card, {\n      className: \"business-header\"\n    }, __jsx(\"div\", {\n      className: \"row\"\n    }, __jsx(\"div\", {\n      className: \"right\"\n    }, __jsx(\"div\", {\n      className: \"description\"\n    }, description)), __jsx(\"div\", {\n      className: \"left\"\n    }, __jsx(\"h4\", {\n      className: \"sub-category\"\n    }, subSubCategory))));\n  }\n\n  renderBusinessBody() {\n    const {\n      business: {\n        address,\n        phoneNumber,\n        facebookName,\n        instagramName,\n        websiteUrl,\n        email,\n        scale1,\n        location\n      }\n    } = this.props;\n    return __jsx(\"div\", {\n      className: \"business-body\"\n    }, __jsx(Row, null, __jsx(Col, {\n      className: \"right\",\n      span: 8,\n      push: 16\n    }), __jsx(Col, {\n      className: \"left\",\n      span: 10,\n      pull: 8\n    }, __jsx(\"p\", {\n      className: \"phone-number\"\n    }, this.formatPhoneNumber(phoneNumber)), __jsx(Row, {\n      className: \"social\"\n    }, websiteUrl && __jsx(\"a\", {\n      className: \"website-link\",\n      href: websiteUrl\n    }, \"website\"), facebookName && __jsx(\"a\", {\n      target: \"_blank\",\n      className: \"facebook\",\n      href: `https://facebook.com/${facebookName}`\n    }, __jsx(\"img\", {\n      src: \"/static/img/facebook-icon.png\",\n      alt: facebookName\n    })), instagramName && __jsx(\"a\", {\n      target: \"_blank\",\n      className: \"instagram\",\n      href: `https://instagram.com/${instagramName}`\n    }, __jsx(\"img\", {\n      src: \"/static/img/instagram-icon.png\",\n      alt: instagramName\n    })), email && __jsx(\"a\", {\n      className: \"mail\",\n      href: `mailto:${email}`\n    }, __jsx(\"img\", {\n      src: mailIcon,\n      alt: email\n    }))))), __jsx(Row, null));\n  }\n\n  renderBusinessHours() {\n    const {\n      business: {\n        businessHours\n      }\n    } = this.props;\n    if (!businessHours) return null;\n    const businessHoursObj = JSON.parse(businessHours);\n    return __jsx(\"div\", {\n      className: \"business-hours\"\n    }, __jsx(\"h1\", null, \"\\u05E9\\u05E2\\u05D5\\u05EA \\u05E4\\u05E2\\u05D9\\u05DC\\u05D5\\u05EA\"), businessHoursObj.map((day, i) => __jsx(Row, {\n      key: `day${i}`,\n      className: \"hour-row\"\n    }, day.length > 0 && day.map((hour, i = j) => __jsx(\"span\", {\n      key: `day${i}-hour${hour}`,\n      className: \"hour\"\n    }, `${(i > 0 ? ', ' : '') + this.formatTime(hour.start)}-${this.formatTime(hour.end)}`)), day.length === 0 && __jsx(\"span\", {\n      className: \"hour\"\n    }, \"\\u05E1\\u05D2\\u05D5\\u05E8\"), __jsx(\"span\", {\n      className: \"day\"\n    }, daysList[i]))));\n  }\n\n  renderLoader() {\n    return __jsx(Content, {\n      className: \"business-page loader\"\n    }, __jsx(AppSpinner, null));\n  }\n\n  renderEmptyState() {\n    return __jsx(Content, {\n      className: \"business-page\"\n    }, __jsx(\"h1\", {\n      className: \"general-title\"\n    }, \"\\u05DE\\u05D8\\u05D9\\u05D9\\u05DC\\u05D9\\u05DD \\u05D9\\u05E9\\u05E8\\u05D0\\u05DC\\u05D9\\u05DD \\u05D1\\u05D7\\u05D5\\u05F4\\u05DC\"), this.renderInfoSection());\n  }\n\n  render() {\n    const {\n      isLoading,\n      business,\n      isReviewModalOpen\n    } = this.props;\n    if (isLoading) return this.renderLoader();\n    if (!isLoading && !business) return this.renderEmptyState();\n    return __jsx(Page, {\n      className: \"business-page\"\n    }, __jsx(Content, null, __jsx(FancyTitle, {\n      highlightedTitle: business.englishName,\n      regularTitle: this.getPlaceName(business)\n    }), __jsx(Breadcrumbs, {\n      items: [{\n        link: '',\n        title: business.placements[0].country.heName,\n        placeObject: business.placements[0].country\n      }, {\n        link: '',\n        title: business.placements[0].heName,\n        placeObject: business.placements[0]\n      }, {\n        link: '',\n        title: business.subCategories[0].title,\n        subCategoryObject: business.subCategories[0],\n        placeObject: business.placements[0]\n      }, {\n        link: '',\n        title: business.englishName,\n        isHighlighted: true\n      }]\n    }), __jsx(Tags, this.props), __jsx(\"div\", {\n      className: \"header-color\"\n    }), __jsx(\"div\", {\n      className: \"info-and-share\"\n    }, business && __jsx(UserInfo, {\n      userDetails: business.userId,\n      additionalSecondaryTitle: `${getFriendlyTime(business.dateCreated)}`\n    }), __jsx(ShareButtons, this.props)), this.renderBusinessHeader(), __jsx(\"div\", {\n      className: \"cubes-row\"\n    }, __jsx(Gallery, this.props), __jsx(CardWrap, null, __jsx(\"div\", {\n      className: \"address-wrapper\"\n    }, __jsx(FontAwesomeIcon, {\n      className: \"address-icon\",\n      icon: faMapMarker\n    }), this.getLocationTitle(business)), business && business.address && __jsx(Map, _extends({\n      isMarkerShown: true,\n      location: business.location\n    }, DEF_PROPS)))), this.renderInfoSection()));\n  }\n\n}\n\nBusinessPage.defaultProps = defaultProps;\n\nconst mapStateToProps = ({\n  BusinessPageReducer\n}) => {\n  const {\n    business,\n    isLoading,\n    isReviewModalOpen,\n    isReviewLoading\n  } = BusinessPageReducer;\n  return {\n    business,\n    isLoading,\n    isReviewModalOpen,\n    isReviewLoading\n  };\n};\n\nconst mapDispatchToProps = {\n  getBusinessByFriendlyUrl,\n  setEmptyState,\n  submitBusinessReview,\n  setReviewModalState,\n  setReviewLoadingState,\n  cleanBusinessPage\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(BusinessPage);","map":null,"metadata":{},"sourceType":"module"}