{"ast":null,"code":"var _jsxFileName = \"/Users/kobimantzur/mapo/hello-next/src/containers/SearchResultsPage/index.js\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport './index.scss';\nimport Page from '../../components/Page';\nimport Content from '../../components/Content';\nimport { searchBySubCategory } from '../../reducers/Search/actions';\nimport BusinessListView from '../../components/BusinessListView';\nimport FancyTitle from '../../components/FancyTitle';\nimport SubCategoryPicker from '../../components/SubCategoryPicker';\nimport { buildPlaceUrl } from '../../services/urlBuilderService';\nimport { Breadcrumbs } from '../../components';\n\nclass SearchResultsPage extends Component {\n  // componentDidMount() {\n  //   this.loadResults();\n  // }\n  componentDidUpdate(prevProps) {\n    if (this.props.location !== prevProps.location) {\n      this.loadResults();\n    }\n  }\n\n  loadResults() {\n    const urlParams = new URLSearchParams(window.location.search);\n    const placeId = urlParams.get('placeId');\n    const subCategoryId = urlParams.get('subCategoryId');\n    this.props.searchBySubCategory(placeId, subCategoryId);\n  }\n\n  getPageTitle() {\n    const {\n      selectedPlace,\n      selectedSubCategory\n    } = this.props;\n    let resultTitle = 'תוצאות חיפוש';\n\n    if (selectedPlace && selectedSubCategory) {\n      resultTitle += ` | ${selectedSubCategory.title} ב${selectedPlace.heName}`;\n    }\n\n    return resultTitle;\n  }\n\n  getBreadcrumbsData() {\n    const {\n      selectedPlace,\n      selectedSubCategory\n    } = this.props;\n    let items = [];\n    if (!selectedSubCategory || !selectedPlace) return items;\n\n    if (selectedPlace.country) {\n      items.push({\n        title: selectedPlace.country.heName,\n        link: buildPlaceUrl(selectedPlace.country),\n        placeObject: selectedPlace.country\n      });\n    }\n\n    items.push({\n      title: selectedPlace.heame,\n      link: buildPlaceUrl(selectedPlace),\n      placeObject: selectedPlace\n    });\n    items.push({\n      title: selectedSubCategory.title,\n      isHighlighted: true\n    });\n    return items;\n  }\n\n  render() {\n    const pageTitle = this.getPageTitle() || '';\n    return __jsx(Page, {\n      className: \"search-results-page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, __jsx(Content, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, pageTitle && __jsx(FancyTitle, {\n      highlightedTitle: pageTitle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }), __jsx(Breadcrumbs, {\n      data: this.getBreadcrumbsData(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }), __jsx(SubCategoryPicker, _extends({}, this.props, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    })), __jsx(\"div\", {\n      className: \"spacer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), __jsx(BusinessListView, _extends({}, this.props, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nconst mapStateToProps = ({\n  SearchReducer\n}) => {\n  const {\n    isLoading,\n    selectedPlace,\n    businessList,\n    selectedSubCategory,\n    subCategoriesList\n  } = SearchReducer;\n  return {\n    isLoading,\n    selectedPlace,\n    businessList,\n    selectedSubCategory,\n    subCategoriesList\n  };\n};\n\nconst mapDispatchToProps = {\n  searchBySubCategory\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchResultsPage);","map":{"version":3,"sources":["/Users/kobimantzur/mapo/hello-next/src/containers/SearchResultsPage/index.js"],"names":["React","Component","connect","Page","Content","searchBySubCategory","BusinessListView","FancyTitle","SubCategoryPicker","buildPlaceUrl","Breadcrumbs","SearchResultsPage","componentDidUpdate","prevProps","props","location","loadResults","urlParams","URLSearchParams","window","search","placeId","get","subCategoryId","getPageTitle","selectedPlace","selectedSubCategory","resultTitle","title","heName","getBreadcrumbsData","items","country","push","link","placeObject","heame","isHighlighted","render","pageTitle","mapStateToProps","SearchReducer","isLoading","businessList","subCategoriesList","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport './index.scss';\nimport Page from '../../components/Page';\nimport Content from '../../components/Content';\nimport { searchBySubCategory } from '../../reducers/Search/actions';\nimport BusinessListView from '../../components/BusinessListView';\nimport FancyTitle from '../../components/FancyTitle';\nimport SubCategoryPicker from '../../components/SubCategoryPicker';\nimport { buildPlaceUrl } from '../../services/urlBuilderService';\nimport { Breadcrumbs } from '../../components';\nclass SearchResultsPage extends Component {\n  // componentDidMount() {\n  //   this.loadResults();\n  // }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.location !== prevProps.location) {\n      this.loadResults();\n    }\n  }\n\n  loadResults() {\n    const urlParams = new URLSearchParams(window.location.search);\n    const placeId = urlParams.get('placeId');\n    const subCategoryId = urlParams.get('subCategoryId');\n\n    this.props.searchBySubCategory(placeId, subCategoryId);\n  }\n\n  getPageTitle() {\n    const { selectedPlace, selectedSubCategory } = this.props;\n    let resultTitle = 'תוצאות חיפוש';\n    if (selectedPlace && selectedSubCategory) {\n      resultTitle += ` | ${selectedSubCategory.title} ב${selectedPlace.heName}`;\n    }\n\n    return resultTitle;\n  }\n  getBreadcrumbsData() {\n    const { selectedPlace, selectedSubCategory } = this.props;\n    let items = [];\n    if (!selectedSubCategory || !selectedPlace) return items;\n    if (selectedPlace.country) {\n      items.push({\n        title: selectedPlace.country.heName,\n        link: buildPlaceUrl(selectedPlace.country),\n        placeObject: selectedPlace.country\n      });\n    }\n    items.push({\n      title: selectedPlace.heame,\n      link: buildPlaceUrl(selectedPlace),\n      placeObject: selectedPlace\n    });\n\n    items.push({\n      title: selectedSubCategory.title,\n      isHighlighted: true\n    });\n\n    return items;\n  }\n\n  render() {\n    const pageTitle = this.getPageTitle() || '';\n    return (\n      <Page className=\"search-results-page\">\n        <Content>\n          {pageTitle && <FancyTitle highlightedTitle={pageTitle} />}\n          <Breadcrumbs data={this.getBreadcrumbsData()} />\n          <SubCategoryPicker {...this.props} />\n          <div className=\"spacer\" />\n          <BusinessListView {...this.props} />\n        </Content>\n      </Page>\n    );\n  }\n}\nconst mapStateToProps = ({ SearchReducer }) => {\n  const {\n    isLoading,\n    selectedPlace,\n    businessList,\n    selectedSubCategory,\n    subCategoriesList\n  } = SearchReducer;\n  return {\n    isLoading,\n    selectedPlace,\n    businessList,\n    selectedSubCategory,\n    subCategoriesList\n  };\n};\nconst mapDispatchToProps = {\n  searchBySubCategory\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchResultsPage);\n"]},"metadata":{},"sourceType":"module"}