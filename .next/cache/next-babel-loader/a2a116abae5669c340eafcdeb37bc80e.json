{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport './index.scss';\nimport Page from '../../components/Page';\nimport Content from '../../components/Content';\nimport { searchBySubCategory } from '../../reducers/Search/actions';\nimport BusinessListView from '../../components/BusinessListView';\nimport SubCategoryPicker from '../../components/SubCategoryPicker';\nimport { buildPlaceUrl } from '../../services/urlBuilderService';\nimport { Breadcrumbs, FancyTitle } from '../../components';\n\nvar SearchResultsPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SearchResultsPage, _Component);\n\n  function SearchResultsPage() {\n    _classCallCheck(this, SearchResultsPage);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SearchResultsPage).apply(this, arguments));\n  }\n\n  _createClass(SearchResultsPage, [{\n    key: \"componentDidUpdate\",\n    // componentDidMount() {\n    //   this.loadResults();\n    // }\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.location !== prevProps.location) {\n        this.loadResults();\n      }\n    }\n  }, {\n    key: \"loadResults\",\n    value: function loadResults() {\n      var urlParams = new URLSearchParams(window.location.search);\n      var placeId = urlParams.get('placeId');\n      var subCategoryId = urlParams.get('subCategoryId');\n      this.props.searchBySubCategory(placeId, subCategoryId);\n    }\n  }, {\n    key: \"getPageTitle\",\n    value: function getPageTitle() {\n      var _this$props = this.props,\n          selectedPlace = _this$props.selectedPlace,\n          selectedSubCategory = _this$props.selectedSubCategory;\n      var resultTitle = 'תוצאות חיפוש';\n\n      if (selectedPlace && selectedSubCategory) {\n        resultTitle += \" | \".concat(selectedSubCategory.title, \" \\u05D1\").concat(selectedPlace.heName);\n      }\n\n      return resultTitle;\n    }\n  }, {\n    key: \"getBreadcrumbsData\",\n    value: function getBreadcrumbsData() {\n      var _this$props2 = this.props,\n          selectedPlace = _this$props2.selectedPlace,\n          selectedSubCategory = _this$props2.selectedSubCategory;\n      var items = [];\n      if (!selectedSubCategory || !selectedPlace) return items;\n\n      if (selectedPlace.country && typeof selectedPlace.country === 'object') {\n        items.push({\n          title: selectedPlace.country.heName,\n          link: buildPlaceUrl(selectedPlace.country),\n          placeObject: selectedPlace.country\n        });\n      }\n\n      items.push({\n        title: selectedPlace.heName,\n        link: buildPlaceUrl(selectedPlace),\n        placeObject: selectedPlace\n      });\n      items.push({\n        title: selectedSubCategory.title,\n        isHighlighted: true\n      });\n      return items;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var pageTitle = this.getPageTitle() || '';\n      return __jsx(Page, {\n        className: \"search-results-page\"\n      }, __jsx(Content, null, pageTitle && __jsx(FancyTitle, {\n        highlightedTitle: pageTitle\n      }), __jsx(Breadcrumbs, {\n        items: this.getBreadcrumbsData()\n      }), __jsx(SubCategoryPicker, this.props), __jsx(\"div\", {\n        className: \"spacer\"\n      }), __jsx(BusinessListView, this.props)));\n    }\n  }]);\n\n  return SearchResultsPage;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(_ref) {\n  var SearchReducer = _ref.SearchReducer;\n  var isLoading = SearchReducer.isLoading,\n      selectedPlace = SearchReducer.selectedPlace,\n      businessList = SearchReducer.businessList,\n      selectedSubCategory = SearchReducer.selectedSubCategory,\n      subCategoriesList = SearchReducer.subCategoriesList;\n  return {\n    isLoading: isLoading,\n    selectedPlace: selectedPlace,\n    businessList: businessList,\n    selectedSubCategory: selectedSubCategory,\n    subCategoriesList: subCategoriesList\n  };\n};\n\nvar mapDispatchToProps = {\n  searchBySubCategory: searchBySubCategory\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchResultsPage);","map":{"version":3,"sources":["/Users/kobimantzur/mapo/web/src/containers/SearchResultsPage/index.js"],"names":["React","Component","connect","Page","Content","searchBySubCategory","BusinessListView","SubCategoryPicker","buildPlaceUrl","Breadcrumbs","FancyTitle","SearchResultsPage","prevProps","props","location","loadResults","urlParams","URLSearchParams","window","search","placeId","get","subCategoryId","selectedPlace","selectedSubCategory","resultTitle","title","heName","items","country","push","link","placeObject","isHighlighted","pageTitle","getPageTitle","getBreadcrumbsData","mapStateToProps","SearchReducer","isLoading","businessList","subCategoriesList","mapDispatchToProps"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAO,cAAP;AACA,OAAOC,IAAP,MAAiB,uBAAjB;AACA,OAAOC,OAAP,MAAoB,0BAApB;AACA,SAASC,mBAAT,QAAoC,+BAApC;AACA,OAAOC,gBAAP,MAA6B,mCAA7B;AACA,OAAOC,iBAAP,MAA8B,oCAA9B;AACA,SAASC,aAAT,QAA8B,kCAA9B;AACA,SAASC,WAAT,EAAsBC,UAAtB,QAAwC,kBAAxC;;IACMC,iB;;;;;;;;;;;;;AACJ;AACA;AACA;uCAEmBC,S,EAAW;AAC5B,UAAI,KAAKC,KAAL,CAAWC,QAAX,KAAwBF,SAAS,CAACE,QAAtC,EAAgD;AAC9C,aAAKC,WAAL;AACD;AACF;;;kCAEa;AACZ,UAAMC,SAAS,GAAG,IAAIC,eAAJ,CAAoBC,MAAM,CAACJ,QAAP,CAAgBK,MAApC,CAAlB;AACA,UAAMC,OAAO,GAAGJ,SAAS,CAACK,GAAV,CAAc,SAAd,CAAhB;AACA,UAAMC,aAAa,GAAGN,SAAS,CAACK,GAAV,CAAc,eAAd,CAAtB;AAEA,WAAKR,KAAL,CAAWR,mBAAX,CAA+Be,OAA/B,EAAwCE,aAAxC;AACD;;;mCAEc;AAAA,wBACkC,KAAKT,KADvC;AAAA,UACLU,aADK,eACLA,aADK;AAAA,UACUC,mBADV,eACUA,mBADV;AAEb,UAAIC,WAAW,GAAG,cAAlB;;AACA,UAAIF,aAAa,IAAIC,mBAArB,EAA0C;AACxCC,QAAAA,WAAW,iBAAUD,mBAAmB,CAACE,KAA9B,oBAAwCH,aAAa,CAACI,MAAtD,CAAX;AACD;;AAED,aAAOF,WAAP;AACD;;;yCACoB;AAAA,yBAC4B,KAAKZ,KADjC;AAAA,UACXU,aADW,gBACXA,aADW;AAAA,UACIC,mBADJ,gBACIA,mBADJ;AAEnB,UAAII,KAAK,GAAG,EAAZ;AAEA,UAAI,CAACJ,mBAAD,IAAwB,CAACD,aAA7B,EAA4C,OAAOK,KAAP;;AAE5C,UAAIL,aAAa,CAACM,OAAd,IAAyB,OAAON,aAAa,CAACM,OAArB,KAAiC,QAA9D,EAAwE;AACtED,QAAAA,KAAK,CAACE,IAAN,CAAW;AACTJ,UAAAA,KAAK,EAAEH,aAAa,CAACM,OAAd,CAAsBF,MADpB;AAETI,UAAAA,IAAI,EAAEvB,aAAa,CAACe,aAAa,CAACM,OAAf,CAFV;AAGTG,UAAAA,WAAW,EAAET,aAAa,CAACM;AAHlB,SAAX;AAKD;;AACDD,MAAAA,KAAK,CAACE,IAAN,CAAW;AACTJ,QAAAA,KAAK,EAAEH,aAAa,CAACI,MADZ;AAETI,QAAAA,IAAI,EAAEvB,aAAa,CAACe,aAAD,CAFV;AAGTS,QAAAA,WAAW,EAAET;AAHJ,OAAX;AAMAK,MAAAA,KAAK,CAACE,IAAN,CAAW;AACTJ,QAAAA,KAAK,EAAEF,mBAAmB,CAACE,KADlB;AAETO,QAAAA,aAAa,EAAE;AAFN,OAAX;AAKA,aAAOL,KAAP;AACD;;;6BAEQ;AACP,UAAMM,SAAS,GAAG,KAAKC,YAAL,MAAuB,EAAzC;AACA,aACE,MAAC,IAAD;AAAM,QAAA,SAAS,EAAC;AAAhB,SACE,MAAC,OAAD,QACGD,SAAS,IAAI,MAAC,UAAD;AAAY,QAAA,gBAAgB,EAAEA;AAA9B,QADhB,EAEE,MAAC,WAAD;AAAa,QAAA,KAAK,EAAE,KAAKE,kBAAL;AAApB,QAFF,EAGE,MAAC,iBAAD,EAAuB,KAAKvB,KAA5B,CAHF,EAIE;AAAK,QAAA,SAAS,EAAC;AAAf,QAJF,EAKE,MAAC,gBAAD,EAAsB,KAAKA,KAA3B,CALF,CADF,CADF;AAWD;;;;EApE6BZ,S;;AAsEhC,IAAMoC,eAAe,GAAG,SAAlBA,eAAkB,OAAuB;AAAA,MAApBC,aAAoB,QAApBA,aAAoB;AAAA,MAE3CC,SAF2C,GAOzCD,aAPyC,CAE3CC,SAF2C;AAAA,MAG3ChB,aAH2C,GAOzCe,aAPyC,CAG3Cf,aAH2C;AAAA,MAI3CiB,YAJ2C,GAOzCF,aAPyC,CAI3CE,YAJ2C;AAAA,MAK3ChB,mBAL2C,GAOzCc,aAPyC,CAK3Cd,mBAL2C;AAAA,MAM3CiB,iBAN2C,GAOzCH,aAPyC,CAM3CG,iBAN2C;AAQ7C,SAAO;AACLF,IAAAA,SAAS,EAATA,SADK;AAELhB,IAAAA,aAAa,EAAbA,aAFK;AAGLiB,IAAAA,YAAY,EAAZA,YAHK;AAILhB,IAAAA,mBAAmB,EAAnBA,mBAJK;AAKLiB,IAAAA,iBAAiB,EAAjBA;AALK,GAAP;AAOD,CAfD;;AAgBA,IAAMC,kBAAkB,GAAG;AACzBrC,EAAAA,mBAAmB,EAAnBA;AADyB,CAA3B;AAGA,eAAeH,OAAO,CAACmC,eAAD,EAAkBK,kBAAlB,CAAP,CAA6C/B,iBAA7C,CAAf","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport './index.scss';\nimport Page from '../../components/Page';\nimport Content from '../../components/Content';\nimport { searchBySubCategory } from '../../reducers/Search/actions';\nimport BusinessListView from '../../components/BusinessListView';\nimport SubCategoryPicker from '../../components/SubCategoryPicker';\nimport { buildPlaceUrl } from '../../services/urlBuilderService';\nimport { Breadcrumbs, FancyTitle } from '../../components';\nclass SearchResultsPage extends Component {\n  // componentDidMount() {\n  //   this.loadResults();\n  // }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.location !== prevProps.location) {\n      this.loadResults();\n    }\n  }\n\n  loadResults() {\n    const urlParams = new URLSearchParams(window.location.search);\n    const placeId = urlParams.get('placeId');\n    const subCategoryId = urlParams.get('subCategoryId');\n\n    this.props.searchBySubCategory(placeId, subCategoryId);\n  }\n\n  getPageTitle() {\n    const { selectedPlace, selectedSubCategory } = this.props;\n    let resultTitle = 'תוצאות חיפוש';\n    if (selectedPlace && selectedSubCategory) {\n      resultTitle += ` | ${selectedSubCategory.title} ב${selectedPlace.heName}`;\n    }\n\n    return resultTitle;\n  }\n  getBreadcrumbsData() {\n    const { selectedPlace, selectedSubCategory } = this.props;\n    let items = [];\n\n    if (!selectedSubCategory || !selectedPlace) return items;\n\n    if (selectedPlace.country && typeof selectedPlace.country === 'object') {\n      items.push({\n        title: selectedPlace.country.heName,\n        link: buildPlaceUrl(selectedPlace.country),\n        placeObject: selectedPlace.country\n      });\n    }\n    items.push({\n      title: selectedPlace.heName,\n      link: buildPlaceUrl(selectedPlace),\n      placeObject: selectedPlace\n    });\n\n    items.push({\n      title: selectedSubCategory.title,\n      isHighlighted: true\n    });\n\n    return items;\n  }\n\n  render() {\n    const pageTitle = this.getPageTitle() || '';\n    return (\n      <Page className=\"search-results-page\">\n        <Content>\n          {pageTitle && <FancyTitle highlightedTitle={pageTitle} />}\n          <Breadcrumbs items={this.getBreadcrumbsData()} />\n          <SubCategoryPicker {...this.props} />\n          <div className=\"spacer\" />\n          <BusinessListView {...this.props} />\n        </Content>\n      </Page>\n    );\n  }\n}\nconst mapStateToProps = ({ SearchReducer }) => {\n  const {\n    isLoading,\n    selectedPlace,\n    businessList,\n    selectedSubCategory,\n    subCategoriesList\n  } = SearchReducer;\n  return {\n    isLoading,\n    selectedPlace,\n    businessList,\n    selectedSubCategory,\n    subCategoriesList\n  };\n};\nconst mapDispatchToProps = {\n  searchBySubCategory\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchResultsPage);\n"]},"metadata":{},"sourceType":"module"}